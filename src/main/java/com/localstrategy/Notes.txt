When opening a new order all open opposite orders with RR > tpRR will be closed.

Currently we close them before opening a new order. It means we get their profit for opening a new order.

In real life, we would have to wait for those orders to close.

Meaning we open a new order later. Twice later.

Let's test if that works. It shouldn't really make a difference and we might prefer opening an order as soon as possible since we work with breakout orders.


TODO:
    Done. Implement interest payment at the moment of opening an order
    Done. Implement interest calculation every round hour
    Done. Rewrite RiskManager to use position's borrowAmount
    Done. Add slippage to trade entry
    Done. Add slippage to trade close
    Done. Add slippage to trade stoploss

TODO:
    Restart simulation from 365
    Critical days seem to be 575 to ...forever

FIXME:
    362 + 162 aaand it broke starting 2022-08-06

    Tested with 2022-08-01, 70 days later lost all funds (on day 2022-10-14)

    Starting at 2022-10-10 results in over 30 days of constant losses and lose all money on day 53 (as result of last 4 days of losses)

    TODO: Check 500000k and 2000000k candles starting 2022-10-10 in metatrader (a week or so)
    TODO: Rewrite all input files to hold only price formatted to 2 decimals, the amount and timestamp
    TODO: Rewrite the program into concurrent. Test each day separately. I doubt we need to transfer anything onto the next open

    Lower filesize, attempt to transfer to NVMe, and turn concurrent - I suspect 6 to 8 times better performance.

    Also overall waaaaaaaay too many positions for those profits




    TODO:
        Strategy works 
            from day 0 to 539 (2021-03-01 to 2022-08-21)
            from day 716 to 857 (2023-02-14 to 2023-07-05)
        Loses 80%
            from day 539 to 716 (2022-08-21 to 2023-02-14)

    TODO:
        Implement trailing stoploss
        Implement stop-limit orders for breakthrough trading
            I guess the difference between the stop and the limit price can be the slippage percentage?

        An interesting problem is programmatical order limit on binance. 5 is the limit for stop-limit orders. Here, new orders have 2 stop-limits, meaning only 3 can be active at the time of placing an order

    TODO:
        tpRR lags by the tradeRequestLatency behind opening our order programmatically and getting a usedUpdate frame. My assumption is it is approximatelly the same time it takes the trade to be executed? Because now we're getting confirmations over a stream
            We can probably locally detect the change in price and when our order would trigger, therefore the time it takes to close tpRR trades is the time it takes the exchange to process the trade request.



